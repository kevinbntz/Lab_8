<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Submit Data</title>
   <!-- Mapbox CSS -->
   <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
   <style>
        @font-face {
            font-family: 'Roboto Mono';
            src: url('https://fonts.googleapis.com/css?family=Roboto Mono');
        }
       body {
           /* font-family: 'Roboto Mono'; */
           font-family: Arial, sans-serif;
           background-color: black;
       }
       #map {
           width: 100%;
           height: 400px;
           margin-bottom: 20px;
       }
   </style>  
</head>
<body>
   <h1 style="color:white; font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;">Submit Your Location Data</h1>
   <div id="map"></div>
   <form action="/submit" method="POST">
       <label for="name" style="color:white">Location Name:</label>
       <input type="text" id="name" name="name" required><br><br>

       <label for="title" style="color:white">Song Title:</label>
       <input type="text" id="title" name="title" required><br><br>

       <label for="artist" style="color:white">Artist:</label>
       <input type="text" id="artist" name="artist" required><br><br>

       <label for="lon" style="color:white">Longitude:</label>
       <input type="number" step="any" id="lon" name="lon" required><br><br>

       <label for="lat" style="color:white">Latitude:</label>
       <input type="number" step="any" id="lat" name="lat" required><br><br>

       <label for="lyrics" style="color:white">Lyrics:</label>
       <textarea id="lyrics" name="lyrics"></textarea><br><br>

       <button type="submit">Submit</button>
   </form>

   <!-- Mapbox JS -->
   <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
   <script>
   // ADD YOUR MAPBOX ACCESS TOKEN
       mapboxgl.accessToken = "pk.eyJ1Ijoia2Jlbml0ZXoiLCJhIjoiY20xanRkNDJjMDU2bDJpb2tkaTltN2R5NiJ9.LHpehjaR0swXOUvk8D5F9w";
      
       // Initialize the map
       const map = new mapboxgl.Map({
           container: 'map', // Container ID
           style: "mapbox://styles/kbenitez/cm2tclyo1000001pa7olh0953", // Map style
           center: [-73.9442, 40.6482], // Initial map center [lon, lat]
           zoom: 10 // Initial zoom level
       });

       // Add map controls
       map.addControl(new mapboxgl.NavigationControl());

       // Marker for selected location
       let marker;

       // Click event to get coordinates
       map.on('click', (e) => {
           const lon = e.lngLat.lng;
           const lat = e.lngLat.lat;

           // Update form fields with coordinates
           document.getElementById('lon').value = lon.toFixed(6);
           document.getElementById('lat').value = lat.toFixed(6);

           // Place or move marker on the map
           if (marker) {
               marker.setLngLat([lon, lat]);
           } else {
               marker = new mapboxgl.Marker().setLngLat([lon, lat]).addTo(map);
           }
       });
   </script>

</body>
</html>